/*
 * movinwords v1.0.1 - Add animation to your words and sentences tags.
 * Copyright (c) 2021 Ignacio Revuelta
 */
!function(t,e){"function"==typeof define&&define.amd?define(["module","exports"],e):"undefined"!=typeof exports?e(module,exports):(e(e={exports:{}},e.exports),t.movinwords=e.exports)}(this,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,a=!1,s=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){a=!0,s=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw s}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r,n=arguments[e];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=(function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}(s,[{key:"start",value:function(){this.started||(this.started=!0,this.parseSentences())}},{key:"getSentences",value:function(){var e=this;this.sentences=document.querySelectorAll(this.options.el),this.sentences.forEach(function(t){t.classList.add(e.classNames.base),t.classList.add(e.options.transition)})}},{key:"parseSentences",value:function(){var e=this;this.sentences.forEach(function(t){e.setCSSVariables(t),e.createAndAppendWordTags(t),e.createAndAppendLetterTags(t),setTimeout(function(){t.classList.add(e.visible),delete t.dataset[e.classNames.base]},500)})}},{key:"createAndAppendWordTags",value:function(t){var e=this.createWordTags(t);this.appendTags(t,e)}},{key:"createAndAppendLetterTags",value:function(t){var r=this;t.querySelectorAll("."+this.classNames.word).forEach(function(t,e){e=r.createLetterTags(t,e+1);r.appendTags(t,e)})}},{key:"isArray",value:function(t){return Array.isArray(t)}},{key:"isEmptyArray",value:function(t){if(Array.isArray(t)&&t)return!t.length}},{key:"isHighlightedWord",value:function(t){var e=this.options.highlight.words;return e&&!this.isEmptyArray(e)&&e.includes(t)}},{key:"createTag",value:function(t){var e,r=document.createElement(t.tag);for(e in r.className=t.className,r.innerText=t.text,t.vars)r.style.setProperty("--mw-"+e,t.vars[e]);return r}},{key:"appendTags",value:function(t,e){var r=!(t.innerHTML=""),n=!1,a=void 0;try{for(var s=e[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var i=i.value;t.appendChild(i)}}catch(t){n=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(n)throw a}}}},{key:"getWordSpacing",value:function(t){return this.options.wordSpacing||.4*parseInt(window.getComputedStyle(t,null).getPropertyValue("font-size"))}},{key:"getWordsArray",value:function(t){return t.innerText.trim().split(" ")}},{key:"getLettersArray",value:function(t){return[].concat(function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}(t.innerText))}},{key:"setCSSVariables",value:function(t){t.style.setProperty("--mw-word-spacing",this.getWordSpacing(t)),t.style.setProperty("--mw-duration",this.options.duration+"ms"),t.style.setProperty("--mw-delay",this.options.delay+"ms"),t.style.setProperty("--mw-offset",this.options.offset)}},{key:"createWordTags",value:function(t){var e=[],r=this.getWordsArray(t),n=!0,a=!1,s=void 0;try{for(var i=r[Symbol.iterator]();!(n=(u=i.next()).done);n=!0){var o=u.value,l="span",u=this.classNames.word;this.isHighlightedWord(o)&&(u+=" "+this.options.highlight.classname,l=this.options.highlight.tag),e.push(this.createTag({tag:l,className:u,text:o}))}}catch(t){a=!0,s=t}finally{try{!n&&i.return&&i.return()}finally{if(a)throw s}}return e}},{key:"createLetterTags",value:function(t,e){var r=[],n=this.getLettersArray(t),a=!0,s=!1,i=void 0;try{for(var o=n.entries()[Symbol.iterator]();!(a=(u=o.next()).done);a=!0){var l=c(u.value,2),u=l[0],l=l[1];r.push(this.createTag({tag:"span",className:""+this.classNames.letter,text:l,vars:{w:e,l:u}}))}}catch(t){s=!0,i=t}finally{try{!a&&o.return&&o.return()}finally{if(s)throw i}}return r}}]),s);function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),this.sentences=null,this.started=!1,this.visible="--v",this.classNames={base:"mw",word:"mw-w",letter:"mw-l"},this.options=r({autostart:!0,duration:1e3,delay:0,offset:20,transition:"fadeIn",wordSpacing:null,highlight:{classname:"highlight",tag:"strong",words:[]}},t),this.getSentences(),this.options.autostart&&this.start()}e.default=a,t.exports=e.default});